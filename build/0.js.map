{"version":3,"sources":["../../src/pages/view/view.module.ts","../../src/pages/view/view.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ViewPage } from './view';\n\n@NgModule({\n  declarations: [\n    ViewPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ViewPage),\n  ],\n})\nexport class ViewPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/view/view.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { resultValue } from '../dataVal';\n\nimport { HomePage } from \"../home/home\";\n\n@IonicPage()\n@Component({\n  selector: 'page-view',\n  templateUrl: 'view.html',\n})\nexport class ViewPage {\n\n  private resultVal: resultValue;\n  /** 벌고있는 돈 */\n  private earning = {\n    calc: 0,\n    show: '0',\n    module: '0',\n  };\n\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\n    if (navParams.get('data') === undefined)\n      navCtrl.setRoot(HomePage);\n    else {\n      this.resultVal = navParams.get('data');\n      this.realtimeRefresh();\n    }\n  }\n  /** 마지막 월급날(시작점) */\n  private lastPayday: any;\n  /** 이제 받게될 날 */\n  private nextPayday: any;\n  ionViewDidLoad() {\n    if (this.resultVal !== undefined) {\n      this.resultVal.salary = Number(this.resultVal.salary);\n      if (this.resultVal.payTerm == '연봉') {\n        this.resultVal.salary /= 12;\n      }\n      this.resultVal.salary *= 10000;\n      this.setCourse();\n    }\n  }\n  /** 마지막 조회 이후로 얼마나 벌었습니다! */\n  private earnFromLastRefresh = 0;\n  ionViewWillEnter() {\n    var tmp = localStorage.getItem('lastRefresh');\n    var lastRefresh = new Date().getTime();\n    var now = new Date().getTime();\n    if (tmp || false)\n      lastRefresh = new Date(tmp).getTime();\n\n  }\n  /** 시작점, 끝점 파악하기 */\n  setCourse() {\n    var lastPayday: any[] = [new Date().getUTCFullYear(), new Date().getUTCMonth() + 1, this.resultVal.payday];\n    var nextPayday: any[] = [new Date().getUTCFullYear(), new Date().getUTCMonth() + 1, this.resultVal.payday];\n    console.log('before calc:', lastPayday, nextPayday);\n    var now = new Date().getUTCDate();\n    if (now < this.resultVal.payday) { // 아직 품삯날이 안됐다면\n      lastPayday[1]--;\n      if (!lastPayday[1]) {\n        lastPayday[1] = 12;\n        lastPayday[0]--;\n      }\n    } else { // 이미 품삯날이 지났다면\n      nextPayday[1]++;\n      if (nextPayday[1] > 12) {\n        nextPayday[1] = 1;\n        nextPayday[0]++;\n      }\n    }\n    if (lastPayday[1] < 10) {\n      lastPayday[1] = '0' + lastPayday[1];\n    }\n    if (nextPayday[1] < 10) {\n      nextPayday[1] = '0' + nextPayday[1];\n    }\n    this.lastPayday = new Date(lastPayday.join('-')).getTime();\n    this.nextPayday = new Date(nextPayday.join('-')).getTime();\n    console.log('result;', this.lastPayday, this.nextPayday);\n  }\n  private refresh: any;\n  /** 프레임처리 */\n  realtimeRefresh() {\n    this.refresh = setInterval(() => {\n      let now = new Date().getTime();\n      let day = new Date().getDate();\n      if (day == this.resultVal.payday)\n        this.setCourse();\n\n      this.earning.calc = this.resultVal.salary * (now - this.lastPayday) / (this.nextPayday - this.lastPayday);\n      let tmp = Number(this.earning.calc.toFixed(2)).toLocaleString('ko').split('.');\n      if (tmp[1] !== undefined) { // 소수점 두자리 고정 틀\n        if (tmp[1].length == 1)\n          tmp[1] += '0';\n      } else {\n        tmp[1] = '00';\n      }\n      this.earning.show = tmp[0];\n      this.earning.module = tmp[1];\n    }, 73);\n  }\n\n  ionViewWillLeave() {\n    clearInterval(this.refresh);\n    if (this.resultVal !== undefined) {\n      if (this.resultVal.payTerm == '연봉')\n        this.resultVal.salary *= 12;\n      this.resultVal.salary /= 10000;\n      this.resultVal.salary = Math.round(this.resultVal.salary);\n    }\n  }\n\n  setClipBoard() {\n    console.log('클립보드에 주소 저장 예정');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/view/view.ts"],"sourceRoot":""}